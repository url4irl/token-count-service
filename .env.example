# =============================================================================
# Token Count Service - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values for your environment.
# Required variables must be set, optional variables have defaults.

# -----------------------------------------------------------------------------
# Core Application
# -----------------------------------------------------------------------------

# Application environment (development, production, test)
# Default: "development"
NODE_ENV=development

# -----------------------------------------------------------------------------
# Storage
# -----------------------------------------------------------------------------

# PostgreSQL database connection URL
# Required: Yes
# Example: postgres://user:password@localhost:5432/dbname
DATABASE_URL=postgres://postgres:postgres@localhost:5433/postgres

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------

# Encryption key for sensitive data (must be at least 32 characters)
# Required: Yes
# Generate a secure key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=3c02d3e32043f147f082c1987424a5e4867024ae55c5bb8daa886c4d565ce106

# Comma-separated list of allowed IP addresses (bypasses rate limiting)
# Optional: Leave empty to disable IP whitelist
# Example: 127.0.0.1,192.168.1.100,10.0.0.1
ALLOWED_IPS=

# Comma-separated list of allowed domains
# Optional: Leave empty to disable domain whitelist
# Example: example.com,api.example.com
ALLOWED_DOMAINS=

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------

# Default rate limit window in milliseconds
# Optional: Default is 900000 (15 minutes)
# Example: 900000 = 15 minutes, 60000 = 1 minute
RATE_LIMIT_WINDOW_MS=900000

# Maximum number of requests per IP within the default window
# Optional: Default is 100 requests
RATE_LIMIT_MAX_REQUESTS=100

# Strict rate limit window in milliseconds (for resource-intensive endpoints)
# Optional: Default is 60000 (1 minute)
# Used for endpoints like /api/documents/analyze
RATE_LIMIT_STRICT_WINDOW_MS=60000

# Maximum number of requests per IP within the strict window
# Optional: Default is 10 requests
# Used for endpoints like /api/documents/analyze
RATE_LIMIT_STRICT_MAX_REQUESTS=10

# -----------------------------------------------------------------------------
# OpenTelemetry (Observability)
# -----------------------------------------------------------------------------

# OpenTelemetry OTLP endpoint for traces, metrics, and logs
# Optional: Leave empty to disable OpenTelemetry export
# Example: http://localhost:4318/v1/traces
OTEL_EXPORTER_OTLP_ENDPOINT=
